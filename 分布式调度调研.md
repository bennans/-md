# 分布式调度调研

## 背景：

#### 现阶段我们部署的定时任务越来越多，使得管理变得很繁琐麻烦，而且之前用的Quartz所做的分布式功能只有实现高可用，没有做到任务的分布式执行，所以我们希望寻找一个分布式调度框架来解决这些问题

## 调研目的

#### 通过这次调研能够寻找一个适合我们使用调度框架
1. 框架能有一个良好的ui，尽可能的提供可视化操作，为我们的操作提供便利性
2. 尽量轻量级
3. 能够分布式的执行任务，减少调度任务服务器的压力
4. 社区比较活跃，有问题能够解决
## 调研思路
描述调研的大致思路，如：
#### 通过初步的调研我们找了几种现在国内外常用以及比较活跃的分布式调度框架，如下：
* TBSchedule (TBSchedule是一款来自淘宝非常优秀的高性能分布式调度框架)
* azkaban (Azkaban是由Linkedin公司推出的一个批量工作流任务调度器，主要用于在一个工作流内以一个特定的顺序运行一组工作和流程)
* airflow (airflow 是一个编排、调度和监控workflow的平台，由Airbnb开源，现在在Apache Software Foundation 孵化)
* Oozie (Apache Oozie是工作流调度用在Hadoop中)
* elastic-job (elastic-job是当当开源的一款非常好用的作业框架)
* LTS
* opencron
* antares 

#### 根据我们的目的进行初步的筛选，我选择了三种进行调研，分别是azkaban，airflow，elastic-job，主要从功能来进行对比

| | airflow | azkaban | elastic-job |
| ----- | ------ | ------ | ------ |
| 目的 | 通用批处理 | hadoop作业调度 | 提供分布式任务的协调服务 |
| 社区 | 很活跃(国内社区没那么活跃) | 活跃 | 活跃 |
| web界面 | 提供功能较丰富 | 提供功能不错 | 提供功能较差 |
| 编程语言 | python | Java | Java |
| HA | 支持 | 支持 | 支持 |
| Cron Job | 支持 | 支持 | 支持 |
| 监控 | 较好 | 有 | 有 |
| 单节点 | 支持 | 支持 | 支持 | 
| 使用 | 稍复杂 | 简单 | 稍复杂 |
| 分布式 | 支持 | 支持 | 支持 |

#### 接下来分别介绍着三个框架
### azkaban：
阿兹卡班是一个分布式工作流管理器，在LinkedIn上实现，以解决Hadoop工作依赖问题。我们的工作需要有序地运行，从ETL工作到数据分析产品。

架构:
![avatar](/home/picture/1.png)
## 数据或实验结果
展示调研中使用的测试、验证数据集合
通过测试、验证集合获得的验证效果是否与预期一致。如性能、可用性、格式等可量化指标。

## 调研结论
总结调研结果。包括可行性，方案概要，风险评估，方案实现人力等角度总结。